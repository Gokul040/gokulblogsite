<div class="container table-responsive mt-5">
    <div class="adminHead">
        <h1>Blog Management</h1>
    </div>
    <div class="d-flex justify-content-end"><button class="btn btn-success" data-bs-toggle="modal"
            data-bs-target="#addBlog" (click)="getCategory()">New <i class="bi bi-window-plus"></i></button></div>
    <table id="example" datatable [dtOptions]="dtOptions" id=" datatableexample"
        class="table table-striped table-hover table-borderless" style="width:100%" cellspacing="0">
        <thead class="bg-dark text-white">
            <tr>
                <th>#</th>
                <th>Blog Category</th>
                <th>Blog Name</th>
                <th>Created Date</th>
                <th>Updated Date</th>
                <th>Like Count</th>
                <th>View Count</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let item of blogDatas">
                <td class="tbContent">#</td>
                <td class="tbContent">{{ item.category.blogCategoryName }}</td>
                <td class="tbContent">{{ item.blogTitle }}</td>
                <td class="tbContent">{{ item.createdDate | date : "dd/MM/yyyy" }}</td>
                <td class="tbContent">{{ item.updatedDate | date : "dd/MM/yyyy" }}</td>
                <td class="tbContent">{{ item.likeCount }}</td>
                <td class="tbContent">{{ item.totalView }}</td>
                <td><button class="btn btn-primary btn-sm" style="color: white;" data-bs-toggle="modal"
                        data-bs-target="#viewBlog" (click)="blogView(item.id)">
                        <i class="bi bi-folder-fill" style="color: white;">
                        </i>
                    </button>

                    <button class="btn btn-info btn-sm ms-2 " style="color: white;" data-bs-toggle="modal"
                        data-bs-target="#editBlog" (click)="getBlogData(item)">
                        <i class=" bi bi-pencil-fill " style="color: white;"></i>
                    </button>
                    <button class="btn btn-danger btn-sm ms-2 " style="color: white;" data-bs-toggle="modal"
                        data-bs-target="#deleteModel" (click)="getId(item.id)">
                        <i class="bi bi-trash3-fill " style="color: white;"></i>
                    </button>
                </td>
            </tr>
        </tbody>
        <tfoot>
            <tr>
                <th>#</th>
                <th>Blog Category</th>
                <th>Blog Name</th>
                <th>Created Date</th>
                <th>Updated Date</th>
                <th>Like Count</th>
                <th>View Count</th>
                <th>Actions</th>
            </tr>
        </tfoot>
    </table>
</div>



<!--Add Modal -->
<div class="modal fade " id="addBlog" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-fullscreen">
        <form>
            <div class="modal-content bac-color">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">Write New Blog</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body d-flex flex-wrap">

                    <div class="card-body mx-3 mt-3">
                        <div class="form-group mb-4">
                            <label for="inputStatus" style="font-size: 20px; font-weight: 600;">Blog Category</label>
                            <select id="inputStatus" class="form-control custom-select"
                                [(ngModel)]="addForm.category.blogCategoryName" name="blogCategoryName">

                                <option value="">select</option>
                                <option style="color: black;" *ngFor="let items of categoryList"
                                    value="{{items.blogCategoryName}}">
                                    {{items.blogCategoryName}}</option>
                            </select>
                        </div>
                        <div class="form-group  mb-4">
                            <label for="inputClientCompany">Blog Name</label>
                            <input type="text" id="inputClientCompany" class="form-control" name="blogTitle"
                                [(ngModel)]="addForm.blogTitle">
                        </div>
                        <div class="form-group mb-4">
                            <label for="inputProjectLeader">Author</label>
                            <input type="text" id="inputProjectLeader" class="form-control" name="authorEmail"
                                [(ngModel)]="addForm.authorEmail">
                        </div>
                        <div class="form-group mb-4">
                            <label for="inputProjectLeader">Blog Image</label>
                            <input type="url" id="inputProjectLeader" class="form-control" name="blogImage1"
                                [(ngModel)]="addForm.blogImage1">
                        </div>
                    </div>

                    <div class="card-body mx-3 mt-3">
                        <div class="form-group mb-4">
                            <label for="inputClientCompany" style="font-size: 20px; font-weight: 600;">Topic 1</label>
                            <input type="text" id="inputClientCompany" class="form-control"
                                [(ngModel)]="addForm.subTopic1" name="subTopic1">
                        </div>
                        <div class="form-group mb-4">
                            <label for="inputProjectLeader">Blog Image</label>
                            <input type="url" id="inputProjectLeader" class="form-control"
                                [(ngModel)]="addForm.blogImage2" name="blogImage2">
                        </div>
                        <div class="form-group mb-4">
                            <label for="inputProjectLeader">Paragaraph 1</label>
                            <textarea id="inputDescription" class="form-control" rows="4"
                                [(ngModel)]="addForm.st1Paragraph1" name="st1Paragraph1"></textarea>
                        </div>
                        <div class="form-group mb-4">
                            <label for="inputProjectLeader">Paragaraph 2</label>
                            <textarea id="inputDescription" class="form-control" rows="4"
                                [(ngModel)]="addForm.st1Paragraph2" name="st1Paragraph2"></textarea>
                        </div>
                        <div class="form-group mb-4">
                            <label for="inputProjectLeader">Paragaraph 3</label>
                            <textarea id="inputDescription" class="form-control" rows="4"
                                [(ngModel)]="addForm.st1Paragraph3" name="st1Paragraph3"></textarea>
                        </div>

                    </div>


                    <div class="card-body mx-3 mt-3">
                        <div class="form-group mb-4">
                            <label for="inputClientCompany" style="font-size: 20px; font-weight: 600;">Topic 2</label>
                            <input type="text" id="inputClientCompany" class="form-control"
                                [(ngModel)]="addForm.subTopic2" name="subTopic2">
                        </div>
                        <div class="form-group mb-4">
                            <label for="inputProjectLeader">Blog Image</label>
                            <input type="url" id="inputProjectLeader" class="form-control"
                                [(ngModel)]="addForm.blogImage3" name="blogImage3">
                        </div>
                        <div class="form-group mb-4">
                            <label for="inputProjectLeader">Paragaraph 4</label>
                            <textarea id="inputDescription2" class="form-control" rows="4"
                                [(ngModel)]="addForm.st2Paragraph4" name="st2Paragraph4"></textarea>
                        </div>
                        <div class="form-group mb-4">
                            <label for="inputProjectLeader">Paragaraph 5</label>
                            <textarea id="inputDescription3" class="form-control" rows="4"
                                [(ngModel)]="addForm.st2Paragraph5" name="st2Paragraph5"></textarea>
                        </div>
                        <div class="form-group mb-4">
                            <label for="inputProjectLeader">Paragaraph 6</label>
                            <textarea id="inputDescription4" class="form-control" rows="4"
                                (ngModel)="addForm.st2Paragraph6" name="st2Paragraph6"></textarea>
                        </div>
                        <!-- <div class="form-group mb-4">
                            <label for="inputProjectLeader">Upload Image</label>
                            <input (click)="onFileChange($event)" class="form-control" rows="4" type="file"
                                name="imageData">
                        </div> -->
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-primary" (click)="addBlog()">Add</button>
                </div>
            </div>
        </form>
    </div>
</div>

<!--Edit Modal -->
<div class="modal fade " id="editBlog" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-fullscreen">
        <form>
            <div class="modal-content bac-color">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">Edit Blog</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body d-flex flex-wrap">

                    <div class="card-body mx-3 mt-3">
                        <div class="form-group  mb-4">
                            <label for="inputClientCompany">Blog Category</label>
                            <input type="text" id="inputClientCompany" class="form-control" name="blogCategoryName"
                                [(ngModel)]="editForm.category.blogCategoryName" disabled="true">
                        </div>
                        <!-- <div class="form-group mb-4">
                            <label for="inputStatus" style="font-size: 20px; font-weight: 600;">Blog Category</label>
                            <input type="text" >
                            <select id="inputStatus" class="form-control custom-select" name="blogCategoryName">

                                <option value="">select</option>
                                <option style="color: black;" *ngFor="let items of categoryList"
                                    value="{{items.blogCategoryName}}">
                                    {{editForm.blogCategoryName}}</option>
                            </select>
                        </div> -->
                        <div class="form-group  mb-4">
                            <label for="inputClientCompany">Blog Name</label>
                            <input type="text" id="inputClientCompany" class="form-control" name="blogTitle"
                                [(ngModel)]="editForm.blogTitle">
                        </div>
                        <div class="form-group mb-4">
                            <label for="inputProjectLeader">Author</label>
                            <input type="text" id="inputProjectLeader" class="form-control" name="authorEmail"
                                disabled="true" [(ngModel)]="editForm.authorEmail">
                        </div>
                        <div class="form-group mb-4">
                            <label for="inputProjectLeader">Blog Image</label>
                            <input type="url" id="inputProjectLeader" class="form-control" name="blogImage1"
                                [(ngModel)]="editForm.blogImage1">
                        </div>
                    </div>

                    <div class="card-body mx-3 mt-3">
                        <div class="form-group mb-4">
                            <label for="inputClientCompany" style="font-size: 20px; font-weight: 600;">Topic 1</label>
                            <input type="text" id="inputClientCompany" class="form-control"
                                [(ngModel)]="editForm.subTopic1" name="subTopic1">
                        </div>
                        <div class="form-group mb-4">
                            <label for="inputProjectLeader">Blog Image</label>
                            <input type="url" id="inputProjectLeader" class="form-control"
                                [(ngModel)]="editForm.blogImage2" name="blogImage2">
                        </div>
                        <div class="form-group mb-4">
                            <label for="inputProjectLeader">Paragaraph 1</label>
                            <textarea id="inputDescription" class="form-control" rows="4"
                                [(ngModel)]="editForm.st1Paragraph1" name="st1Paragraph1"></textarea>
                        </div>
                        <div class="form-group mb-4">
                            <label for="inputProjectLeader">Paragaraph 2</label>
                            <textarea id="inputDescription" class="form-control" rows="4"
                                [(ngModel)]="editForm.st1Paragraph2" name="st1Paragraph2"></textarea>
                        </div>
                        <div class="form-group mb-4">
                            <label for="inputProjectLeader">Paragaraph 3</label>
                            <textarea id="inputDescription" class="form-control" rows="4"
                                [(ngModel)]="editForm.st1Paragraph3" name="st1Paragraph3"></textarea>
                        </div>

                    </div>


                    <div class="card-body mx-3 mt-3">
                        <div class="form-group mb-4">
                            <label for="inputClientCompany" style="font-size: 20px; font-weight: 600;">Topic 2</label>
                            <input type="text" id="inputClientCompany" class="form-control"
                                [(ngModel)]="editForm.subTopic2" name="subTopic2">
                        </div>
                        <div class="form-group mb-4">
                            <label for="inputProjectLeader">Blog Image</label>
                            <input type="url" id="inputProjectLeader" class="form-control"
                                [(ngModel)]="editForm.blogImage3" name="blogImage3">
                        </div>
                        <div class="form-group mb-4">
                            <label for="inputProjectLeader">Paragaraph 4</label>
                            <textarea id="inputDescription2" class="form-control" rows="4"
                                [(ngModel)]="editForm.st2Paragraph4" name="st2Paragraph4"></textarea>
                        </div>
                        <div class="form-group mb-4">
                            <label for="inputProjectLeader">Paragaraph 5</label>
                            <textarea id="inputDescription3" class="form-control" rows="4"
                                [(ngModel)]="editForm.st2Paragraph5" name="st2Paragraph5"></textarea>
                        </div>
                        <div class="form-group mb-4">
                            <label for="inputProjectLeader">Paragaraph 6</label>
                            <textarea id="inputDescription4" class="form-control" rows="4"
                                (ngModel)="editForm.st2Paragraph6" name="st2Paragraph6"></textarea>
                        </div>
                        <!-- <div class="form-group mb-4">
                            <label for="inputProjectLeader">Upload Image</label>
                            <input (click)="onFileChange($event)" class="form-control" rows="4" type="file"
                                name="imageData">
                        </div> -->
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-primary" (click)="editBlog()">Add</button>
                </div>
            </div>
        </form>
    </div>
</div>

<!--View Modal -->
<div class="modal fade " id="viewBlog" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-fullscreen">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="exampleModalLabel">Modal title</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div>
                    <h1>{{viewData.blogTitle}}</h1>
                    <h3>written by {{viewData.author}}</h3>
                    <p>{{viewData.createdDate | date : "dd/MM/yyyy"}}</p>
                </div>
                <img src="{{viewData.blogImage1}}" style="margin-left: 50%;" alt="img1" height="200px" width="auto">
                <div>

                    <h2>{{viewData.subTopic1}}</h2>
                    <img style="margin-left: 50%;" src="{{viewData.blogImage2}}" alt="img1" height="200px" width="auto">
                    <h3>
                        {{viewData.st1Paragraph1}}
                    </h3>

                    <h3>
                        {{viewData.st1Paragraph2}}
                    </h3>
                    <h3>
                        {{viewData.st1Paragraph3}}
                    </h3>
                    <h2>{{viewData.subTopic2}}</h2>
                    <img src="{{viewData.blogImage2}}" alt="img1" height="200px" width="auto" style="margin-left: 50%;">
                    <h3>
                        {{viewData.st2Paragraph4}}
                    </h3>
                    <h3>
                        {{viewData.st2Paragraph5}}
                    </h3>
                    <h3>
                        {{viewData.st2Paragraph6}}
                    </h3>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
</div>

<!--Delete Modal -->
<div class="modal fade" id="deleteModel" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="exampleModalLabel">Are you sure! you want to delete</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                You cannot retrive the data after the delete...
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" (click)="deleteBlog()">Confirm</button>
            </div>
        </div>
    </div>
</div>